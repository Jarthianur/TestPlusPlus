os:
    - linux
    - osx
    - windows

dist: trusty
sudo: required
language: cpp

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - python-pip
      - g++-8

before_install:
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then
        export CXX=g++-8; export GCOV=gcov-8;
        wget -q https://github.com/linux-test-project/lcov/releases/download/v1.14/lcov-1.14.tar.gz;
        tar xf lcov-1.14.tar.gz;
        export LCOV="$PWD/lcov-1.14/bin/lcov --gcov-tool=/usr/bin/$GCOV";
        $LCOV --version; $GCOV --version; $CXX --version;
      fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install libomp; fi
    - if [[ "$TRAVIS_OS_NAME" == "windows" ]]; then cl.exe; fi
    - mkdir reports

install:
    - sudo pip install --upgrade pip
    - sudo pip install spline

script:
    - spline --tags=$TRAVIS_OS_NAME

after_success:
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then bash <(curl -s https://codecov.io/bash); fi

notifications:
    email:
        recipients:
           - jarthianur.github@gmail.com
        on_success: change
        on_failure: change
